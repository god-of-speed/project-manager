{% extends 'base.html.twig' %}
{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('assets/css/pro.css') }}" type="text/css" />
     <style>
     section{
         padding:10px;
     }
     .table{
         border:1px solid #ddd;
     }
     .table thead{
         background-color:black;
         color:white;
     }
     .table th{
         border:1px solid #ddd;
     }
     .table td{
         border:1px solid #ddd;
     }
      #allDiv{
          padding:10px;
         width:100%;
     }
     .divF{
         width:45%;
         float:left;
         margin:7px 30px 7px 7px;
     }
     #divBtn{
          width:100%;
          padding:10px;
          margin:10px 0px 10px 0px;
          background-color:#ddd;
     }
     #divformi{
         display:none;
         height:100%;
         z-index:99;
         width:100%;
         background-color:rgba(0,0,0,0.5);
         position:absolute;
     }
     #divformii{
         display:none;
         height:100%;
         z-index:99;
         width:100%;
         background-color:rgba(0,0,0,0.5);
         position:absolute;
     }
     #divformiii{
         display:none;
         height:100%;
         z-index:99;
         width:100%;
         background-color:rgba(0,0,0,0.5);
         position:absolute;
     }
     #formi{
         display:none;
         width:50%;
         margin:40px auto;
         padding:10px;
         background-color:ghostwhite;
     }
     #formii{
         display:none;
         width:50%;
         margin:40px auto;
         padding:10px;
         background-color:ghostwhite;
     }
     #formiii{
         display:none;
         width:50%;
         margin:40px auto;
         padding:10px;
         background-color:ghostwhite;
     }
     .divF label{
         float:left;
         position:absolute;
         margin:5px 0px 0px 0px;
     }
     .divF input{
         width:70%;
         margin:0;
         float:right;
         border-radius:0px;
     }
     .divF select{
         width:60%;
         border-radius:0px;
         margin:0;
         float:right;
     }
     .divF button{
         float:right;
         border-radius:0px;
         margin:0;
     }
     #form_save{
         margin:10px 0px 0px 150px;
         width:60%;
     }
     .cancel{
         margin:10px 0px 0px 0px;
     }
     td .act{
         width:100px;
         padding:3px;
         background-color:black;
         color:white;
     }
     td .act:hover{
         color:white;
     }
     td div{
         display:none;
         width:100px;
         background-color:#ddd;
     }
     td div .btn{
         width:90%;
         margin:5px 0px 0px 5px;
     }
    
     </style>
{% endblock %}
{% block body %}
    <div class="fluid-container proHead">
         <h3 id="proH3">Projar</h3>
    </div>
    <div class="fluid-container proBody">
      {# {{ include("inc/navHome.html.twig")}}#}
         <div class="container navHome">
        <button class=" btnNav" id="staff">Staff Hub <span class="pull-right arrow">></span></button>
        <div class="subStaff ">
            <button class="btnSubNav" id="subStaff1">Staffs</button>
            <button class="btnSubNav" id="subStaff2">Add Staff</button>
        </div>
        <button class=" btnNav" id="team">Team Hub <span class="pull-right arrow">></span></button>
        <div class="subTeam ">
            <button class="btnSubNav" id="subTeam1">Teams</button>
            <button class="btnSubNav" id="subTeam2">Add Team</button>
        </div>
        <button class=" btnNav" id="project">Project Hub <span class="pull-right arrow">></span></button>
         <div class="subProject ">
            <button class="btnSubNav" id="subProject1">Projects</button>
            <button class="btnSubNav" id="subProject2">Add Project</button>
        </div>
        <button class=" btnNav" id="milestone">Milestone Hub <span class="pull-right arrow">></span></button>
        <div class="subMilestone ">
            <button class="btnSubNav" id="subMilestone1">Milestones</button>
            <button class="btnSubNav" id="subMilestone2">Add Milestone</button>
        </div>
        <button class=" btnNav" id="task">Task Hub <span class="pull-right arrow">></span></button>
        <div class="subTask ">
            <button class="btnSubNav" id="subTask1">Tasks</button>
            <button class="btnSubNav" id="subTask2">Add Task</button>
        </div>
        <button class=" btnNav" id="prospect">Prospects <span class="pull-right arrow">></span></button>
        <div class="subProspect ">
            <button class="btnSubNav" id="subProspect1">Prospects</button>
            <button class="btnSubNav" id="subProspect2">Add Prospect</button>
        </div>
        <button class=" btnNav" id="properties">Properties <span class="pull-right arrow">></span></button>
        <div class="subProperties ">
            <button class="btnSubNav" id="subProperties1">Properties</button>
            <button class="btnSubNav" id="subProperties2">Add Properties</button>
        </div>
        <button class="btnNav" id="inspection">Property Inspection<span class="pull-right arrow">></span></button>
        <div class="subInspection">
            <button class="btnSubNav" id="subInspection1">Record Inspection</button>
        </div>
    </div>
    <div class="container database">
        <div class="dbc"></div>
    </div>
    <div class="container doc">
        <div class="container title">
            <h3>Prospect Inspection Board</h3>
        </div>
        <section>
            <div id="allDiv" class="container">
            {{form_start(form,{'attr':{'class':'form-group'}})}}
            {{form_errors(form)}}
                <div class="divF">
                    {{form_label(form.date,'Date')}}
                    {{form_errors(form.date,{'attr':{'class':'form-text text-muted'}})}}
                    {{form_widget(form.date,{'attr':{'class':'form-control'}})}}
                </div>
                <div class="divF">
                    {{form_label(form.prospect,'Prospect')}}
                    {{form_errors(form.prospect,{'attr':{'class':'form-text text-muted'}})}}
                    {{form_widget(form.prospect,{'attr':{'class':'form-control'}})}}
                    <button id="addPros" class="btn btn-primary">+</button>
                </div>
                <div class="divF">
                    {{form_label(form.prospectRemark,'Prospect Remark')}}
                    {{form_errors(form.prospectRemark,{'attr':{'class':'form-text text-muted'}})}}
                    {{form_widget(form.prospectRemark,{'attr':{'class':'form-control'}})}}
                </div>
                <div class="divF">
                    {{form_label(form.inProperty,'Property')}}
                    {{form_errors(form.inProperty,{'attr':{'class':'form-text text-muted'}})}}
                    {{form_widget(form.inProperty,{'attr':{'class':'form-control'}})}}
                    <button id="addProp" class="btn btn-primary">+</button>
                </div>
                <div class="divF">
                    {{form_label(form.staffRemark,'Staff Remark')}}
                    {{form_errors(form.staffRemark,{'attr':{'class':'form-text text-muted'}})}}
                    {{form_widget(form.staffRemark,{'attr':{'class':'form-control'}})}}
                </div>
                  <div class="divF">
                    {{form_label(form.staff,'Staff')}}
                    {{form_errors(form.staff,{'attr':{'class':'form-text text-muted'}})}}
                    {{form_widget(form.staff,{'attr':{'class':'form-control'}})}}
                    <button id="addStaff" class="btn btn-primary">+</button>
                </div>
                
                    {{form_widget(form.save,{'attr':{'class':'btn btn-primary'}})}}
                
                {{form_end(form)}}
                </div>
                <div id="divBtn" class="container">
                    <button class="btn btn-primary">Duration</button>
                    <button class="btn btn-success">Send SMS</button>
                    <button class="btn btn-info">Import</button>
                    <button class="btn btn-danger">Export</button>
                </div>
                {% if letter == true %}
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Staff</th>
                                <th>Prospect</th>
                                <th>Properties</th>
                                <th>Staff Remark</th>
                                <th>Prospect Remark</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for inspector in inspector %}
                            <tr>
                                 <td>{{inspector.date|date('Y-m-d')}}</td>
                                 <td>{{inspector.staff}}</td>
                                 <td>{{inspector.prospect}}</td>
                                 <td>{{inspector.inProperty}}</td>
                                 <td>{{inspector.staffRemark}}</td>
                                 <td>{{inspector.prospectRemark}}</td>
                                 <td>
                                     <button id="a{{inspector.id}}" class="btn act">Action</button>
                                     <div id="actDiv">
                                         <button id="v{{inspector.id}}" class="btn btn-info">View</button>
                                         <button id="e{{inspector.id}}" class="btn btn-primary">Edit</button>
                                         <button id="d{{inspector.id}}" class="btn btn-danger">Delete</button>
                                     </div>
                                 </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% else %}
                    <table class="table">
                         <thead>
                            <tr>
                                <th>Date</th>
                                <th>Staff</th>
                                <th>Prospect</th>
                                <th>Properties</th>
                                <th>Staff Remark</th>
                                <th>Prospect Remark</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                              <td colspan="7">No data yet!!</td>
                            </tr>
                        </tbody>
                    </table>
                {% endif %}
        </section>
    </div>
    <div id="divformi" class="fluid-container">
        <div id="formi" class="container">
           <h3 style="background-color:green;width:100%;text-align:center;color:white;margin:0px;padding:7px;">Staff Entry Form</h3>
            {{form_start(form1, {'attr':{'class':'form-group'}})}}
            {{form_errors(form1)}}
                {{form_label(form1.name,'Name')}}
                {{form_errors (form1.name, {'attr':{'class':'form-text text-muted'}}) }}
                {{form_widget(form1.name,{'attr':{"class":"form-control"}})}}

                {{form_label(form1.email,'Email')}}
                {{form_errors (form1.email, {'attr':{'class':'form-text text-muted'}}) }}
                {{form_widget(form1.email,{'attr':{"class":"form-control"}})}}

                {{form_label(form1.phoneNo,'Phone Number')}}
                {{form_errors (form1.phoneNo, {'attr':{'class':'form-text text-muted'}}) }}
                {{form_widget(form1.phoneNo,{'attr':{"class":"form-control"}})}}

                {{form_widget(form1.save,{'attr':{"class":"btn btn-primary pull-left"}})}}
                <button id="cancel1" class="btn btn-danger pull-right cancel">Cancel</button>
                {{form_end(form1)}}
        </div>
    </div>
    <div id="divformii" class="fluid-container">
        <div id="formii" class="container">
            <h3 style="background-color:green;width:100%;text-align:center;color:white;margin:0px;padding:7px;">Prospect Entry Form</h3>
            {{form_start(form2,{'attr':{'class':'form-group'}})}}
            {{form_errors(form2)}}
                {{form_label(form2.prospectName,'Name')}}
                {{form_errors(form2.prospectName,{'attr':{'class':'text-muted form-text'}})}}
                {{form_widget(form2.prospectName,{'attr':{'class':'form-control'}})}}
                
                {{form_label(form2.prospectEmail,'Email')}}
                {{form_errors(form2.prospectEmail,{'attr':{'class':'text-muted form-text'}})}}
                {{form_widget(form2.prospectEmail,{'attr':{'class':'form-control'}})}}

                {{form_label(form2.prospectPhoneNo,'Phone Number')}}
                {{form_errors(form2.prospectPhoneNo,{'attr':{'class':'text-muted form-text'}})}}
                {{form_widget(form2.prospectPhoneNo,{'attr':{'class':'form-control'}})}}

                {{form_widget(form2.save,{'attr':{"class":"btn btn-primary pull-left"}})}}
                <button id="cancel2" class="btn btn-danger pull-right cancel">Cancel</button>
                {{form_end(form2)}}
        </div>
    </div>
    <div id="divformiii" class="fluid-container">
        <div id="formiii" class="container">
            <h3 style="background-color:green;width:100%;text-align:center;color:white;margin:0px;padding:7px;">Property Entry Form</h3>
            {{form_start(form3,{'attr':{'class':'form-group'}})}}
            {{form_errors(form3)}}
                {{form_label(form3.name,'Name')}}
                {{form_errors(form3.name,{'attr':{'class':'form-text text-muted'}})}}
                {{form_widget(form3.name,{'attr':{'class':'form-control'}})}}

                {{form_label(form3.location,'Location')}}
                {{form_errors(form3.location,{'attr':{'class':'form-text text-muted'}})}}
                {{form_widget(form3.location,{'attr':{'class':'form-control'}})}}

                {{form_widget(form3.save,{'attr':{"class":"btn btn-primary pull-left"}})}}
                <button id="cancel3" class="btn btn-danger pull-right cancel">Cancel</button>
                {{form_end(form3)}}
        </div>
    </div>
    </div>
{% endblock %}
{% block javascripts %}
   {{ parent() }}
  <script type="text/javascript" src="{{asset('assets/js/current.js')}}"></script>
  <script>
       $(document).ready(function(){
            $('#addStaff').on('click',function(){
                 $('#divformi').fadeIn(200);
                 $('#formi').fadeIn(200);
            });
            $('#addPros').on('click',function(){
                 $('#divformii').fadeIn(200);
                 $('#formii').fadeIn(200);
            });
            $('#addProp').on('click',function(){
                 $('#divformiii').fadeIn(200);
                 $('#formiii').fadeIn(200);
            });
            $('.cancel').on('click',function(e){
                var e1 = e.target;
                var id= $(e1).attr('id');
                if(id === 'cancel1'){
                 $(this).parent().parent().fadeOut(200);
                 $('#divformi').fadeOut(200);
                }else if(id === 'cancel2'){
                     $(this).parent().parent().fadeOut(200);
                 $('#divformii').fadeOut(200);
                }else if(id === 'cancel3'){
                     $(this).parent().parent().fadeOut(200);
                 $('#divformiii').fadeOut(200);
                }
            });
            $('.act').on('click',function(){
                if($(this).next().is(':visible')){
                    $(this).css({"color":"white"});
                $(this).next().fadeOut(200);
                }else{
                    $(this).css({"color":"white"});
                $(this).next().fadeIn(200);
                }

                $('#actDiv button').on('click',function(e){
                var e1 = e.target;
                var id = $(e1).attr('id');
                var lett = id.charAt(0);
                var num = id.substring(1);
                if(lett === 'd'){
                    if(confirm('Are you sure you want to delete?')){
                        window.location.href="/current-inspector-delete/"+num;
                    }
                }else if(lett === 'e'){
                    window.location.href="/current-inspector-edit/"+num;
                }else if(lett === 'v'){
                    window.location.href="/current-inspector-view/"+num;
                }
            });
            });
            
       });
  </script>
{% endblock %}